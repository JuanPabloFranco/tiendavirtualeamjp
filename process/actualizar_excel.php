<html>    <head>        <title>Actualizar desde CSV</title>        <meta charset="UTF-8">        <meta http-equiv="Refresh" content="5;url=../configAdmin.php">        <meta name="viewport" content="width=device-width, initial-scale=1">        <link rel="stylesheet" href="../css/font-awesome.min.css">        <link rel="stylesheet" href="../css/normalize.css">        <link rel="stylesheet" href="../css/bootstrap.min.css">        <link rel="stylesheet" href="../css/style.css">        <link rel="stylesheet" href="../css/media.css">        <link rel="Shortcut Icon" type="image/x-icon" href="../assets/icons/logo.ico" />        <script src="../js/jquery.min.js"></script>        <script src="../js/bootstrap.min.js"></script>        <script src="../js/autohidingnavbar.min.js"></script>    </head>    <body>        <section>            <div class="container">                <div class="row">                    <div class="col-xs-12 col-md-6 col-md-offset-3 text-center">                        <?php//                        session_start();                        include '../library/consulSQL.php';                        if (isset($_POST['enviar'])) {                            $archivo = $_FILES['archivo']['name'];                            $ruta_archivo = $_FILES['archivo']['tmp_name'];                            if (move_uploaded_file($_FILES['archivo']['tmp_name'], "../assets/csv/" . $_FILES['archivo']['name'])) {                                $leer_archivo = "../assets/csv/" . $_FILES['archivo']['name'];                                if (file_exists($leer_archivo)) {                                    $fp = fopen($leer_archivo, "r");                                    $cantidad = 0;                                    $agotados = 0;                                    while ($datos = fgetcsv($fp, 100000, ";")) {                                        $vecProd = mysqli_fetch_row(ejecutarSQL::consultar("SELECT id FROM producto WHERE codigo_prod='" . $datos[0] . "'"));                                        if (isset($vecProd) && $vecProd[0] <> "") {                                            if ($datos[3] == 0) {                                                if (ejecutarSQL::consultar("UPDATE producto SET precio=" . $datos[2] . ", cantidad_prod=" . $datos[3] . ", estado_prod='Agotado' WHERE codigo_prod='" . $datos[0] . "'")) {                                                    $cantidad++;                                                    $agotados++;                                                }                                            } else {                                                if (ejecutarSQL::consultar("UPDATE producto SET precio=" . $datos[2] . ", cantidad_prod=" . $datos[3] . ", estado_prod='Disponible' WHERE codigo_prod='" . $datos[0] . "'")) {                                                    $cantidad++;                                                }                                            }                                        }                                    }                                    if ($cantidad <> 0) {                                        ?>                                        <img src="../assets/img/correctofull.png" style="width: 50%" class="center-all-contens">                                        <br>                                        <h3>Se actualizar√≥n <?php echo $cantidad; ?> productos, de los cuales <?php echo $agotados; ?> agotados</h3>                                        <p class="lead text-cente">                                            La pagina se redireccionara automaticamente en unos segundos..<br>                                        </p>                <?php            } else {                ?>                                        <img src="../assets/img/incorrectofull.png" style="width: 50%" class="center-all-contens">                                        <br>                                        <h3>Error actualizar los productos</h3>                <?php            }        }    } else {        ?>                                <img src="../assets/img/incorrectofull.png" style="width: 50%" class="center-all-contens">                                <br>                                <h3>Error al guardar el documento</h3>        <?php    }} else {    ?>                            <img src="../assets/img/incorrectofull.png" style="width: 50%" class="center-all-contens">                            <br>                            <h3>No se pudo leer el documento</h3>    <?php}?>                    </div>                </div>            </div>        </section>    </body></html>